:root{
  --bg:#0f172a;
  --panel:#111827;
  --panel-2:#0b1220;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --accent:#22c55e;
  --border:#1f2937;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:14px system-ui,Segoe UI,Roboto,sans-serif;
}

.site-header{padding:16px;border-bottom:1px solid var(--border);background:var(--panel-2)}
.site-header h1{margin:6px 0 0 0;font-size:18px}
.breadcrumb{display:flex;gap:8px;align-items:center;color:var(--muted)}
.breadcrumb a{color:var(--text);text-decoration:none}

.container{max-width:920px;margin:0 auto;padding:16px}

.card-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;margin-top:12px}
.card{display:block;padding:16px;border:1px solid var(--border);border-radius:10px;background:var(--panel);text-decoration:none;color:var(--text)}
.card h2{margin:0 0 8px 0}
/* Colorazione card per type */
.card.note-card{border-left:6px solid var(--border); position:relative}
.card.note-card.colored{border-left-color:var(--type-color, var(--accent))}
.card.note-card.colored::before{content:""; position:absolute; inset:0; background:linear-gradient(0deg, color-mix(in srgb, var(--type-color, transparent) 12%, transparent), transparent); pointer-events:none}

.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.form-grid .full{grid-column:1 / -1}
label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
input,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid var(--border);background:var(--panel-2);color:var(--text)}
textarea{min-height:110px}

.btn{padding:10px 14px;border-radius:10px;border:1px solid var(--border);cursor:pointer}
.btn-primary{background:var(--accent);color:#082414}
.btn-small{padding:6px 10px;font-size:12px}

table{width:100%;border-collapse:collapse;margin-top:12px}
th,td{border:1px solid var(--border);padding:8px;text-align:left}
th{background:var(--panel-2);color:var(--muted);font-weight:600}
.list h2{margin:16px 0 8px 0;font-size:16px}

/* Modal dialog */
.modal-overlay{position:fixed;inset:0;z-index:2147483000}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.5)}
.modal-dialog{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  width:680px;max-width:92vw;max-height:86vh;display:flex;flex-direction:column;
  background:var(--panel);border:1px solid var(--border);border-radius:12px;overflow:hidden}
.modal-header{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:var(--panel-2)}
.modal-header h3{margin:0;font-size:16px}
.modal-close{border:0;background:#334155;color:#fff;border-radius:50%;width:28px;height:28px;cursor:pointer}
.modal-body{padding:10px;display:flex;flex-direction:column;gap:8px;overflow:auto}
.modal-footer{padding:10px;display:flex;justify-content:flex-end;gap:8px;background:var(--panel-2)}
.modal-search{display:flex;gap:8px;align-items:center}
.modal-search input{flex:1}
.modal-actions-small{display:flex;gap:6px}
.modal-list{border:1px solid var(--border);border-radius:8px;padding:8px;overflow:auto;max-height:50vh;background:var(--panel-2)}
.modal-item{display:flex;gap:8px;align-items:center;padding:6px 4px;border-bottom:1px dashed var(--border)}
.modal-item:last-child{border-bottom:0}
.modal-item .id{font-weight:600;color:var(--text);min-width:48px}
.modal-item .title{color:var(--muted)}

/* Tabs for Notes */
.tabs{margin-top:12px}
/* toolbar removed */
.tablist{display:flex;gap:8px;flex-wrap:wrap;border-bottom:1px solid var(--border);padding-bottom:8px}
.tab-btn{padding:8px 12px;border:1px solid var(--border);border-radius:20px;background:var(--panel-2);cursor:pointer}
.tab-btn.active{background:var(--accent);color:#082414}
.panels{margin-top:12px}
.tab-panel{display:block}
.tab-panel.collapsed .panel-grid{display:none}
.panel-header{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;background:var(--panel-2);border:1px solid var(--border);border-radius:8px;cursor:pointer}
.panel-header h4{margin:0;font-size:14px}
.panel-header .chev{transition:transform .2s ease}
.tab-panel.collapsed .panel-header .chev{transform:rotate(-90deg)}
.panel-title{margin:0 0 8px 0;font-size:14px;color:var(--muted)}
.panel-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(390px,1fr));gap:12px}

/* Note cards */
.note-card .card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
.note-card .note-id{font-weight:600;color:var(--muted)}
.note-card .card-row{margin:4px 0}
.note-card .card-actions{display:flex;gap:6px}
.note-card .type-dot{display:inline-block;width:10px;height:10px;border-radius:50%;background:var(--type-color, var(--accent));margin-left:6px}

/* Chips & media */
.muted{color:var(--muted)}
.tags-row .tag-chip{display:inline-block;margin:2px 6px 2px 0;padding:3px 8px;border:1px solid var(--border);border-radius:999px;background:var(--panel-2);font-size:12px}
.animal-chip{display:inline-block;margin:2px 0;padding:3px 8px;border:1px solid var(--border);border-radius:999px;background:#334155;font-size:12px}
.note-image{margin-top:8px}
.note-image img{max-width:100%;display:block;border-radius:8px;border:1px solid var(--border);background:#0b1220}
.note-text{ text-decoration: none; white-space: pre-wrap; display:inline-block }
.note-text-row{ text-align: center }
